{% extends "base.html" %}
{% load render_table from django_tables2 %}
{#{% block header %}{{ campaign.name }}{% endblock %}#}
{% block header %}{{ campaign.name }}{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-2">
            <a class="btn btn-sm btn-info" href="{% url 'manager:campaign-update' pk=campaign.pk %}"> <i class="far fa-edit"></i></a>
            <a class="btn btn-sm btn-danger" href="{% url 'manager:campaign-delete' pk=campaign.pk %}"><i class="fas fa-trash"></i></a>
        </div>
    </div>
    <BR>
    <!-- Event Details -->

    <div class="row">
        <div class="col-md">
            <div class="card card-body">
                <div class="row">
                    {% for c in campaign_info %}



                    <div class="col-md">
                        <h5>רשומים:</h5>
                        <hr>
                        <h3 style="text-align: center;padding: 10px">{{ c.subscribers }}</h3>
                    </div>
                    <div class="col-md">
                        <h5>נשלחו:</h5>
                        <hr>
                        <h3 style="text-align: center;padding: 10px">{{ c.sent }}</h3>
                    </div>
                     <div class="col-md">
                        <h5>נפתחו:</h5>
                        <hr>
                        <h3 style="text-align: center;padding: 10px">{{ c.opened }}</h3>
                    </div>
                     <div class="col-md">
                        <h5>קליקים:</h5>
                        <hr>
                        <h3 style="text-align: center;padding: 10px">{{ c.clicks }}</h3>
                    </div>
                     <div class="col-md">
                        <h5>ביטלו הרשמה:</h5>
                        <hr>
                        <h3 style="text-align: center;padding: 10px">{{ c.unsubscribed }}</h3>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <br>
    <hr>


    <!-- Emails table -->

        <div class="row">
				<div class="col-md">
					<div class="">
						<div class="row">
                            <div class="col-md" style="position: relative">
                                 <h4>מסרים:</h4>
                            </div>
							<div class="col-md table-action-btn" >
								<a href="#" class="btn btn-sm btn-primary btn-success" role="button" aria-pressed="true">הפק דו"ח</a>
								<a href="{% url 'manager:campaign-create'  %}" class="btn btn-sm btn-primary btn-info" role="button" aria-pressed="true">הוסף מייל</a>
{#								<a href="{% url 'mai' pk=event.pk %}" class="btn btn-sm btn-info" role="button" aria-pressed="true" title="הוספת אורח לרשימה">הוספה <i class="fas fa-plus"></i></a>#}
                            </div>


                        </div>
                    </div>

						<div class="wrapper-table card card-body">
							<table class="table table-hover table-sm">
								<thead>
									<tr>
										<th>כותרת</th>
										<th>תור</th>
										<th>דיליי</th>
										<th>נשלחו</th>
										<th>נפתחו</th>
										<th>קליקים</th>
										<th>סטטוס</th>
										<th>ערוך</th>
										<th>הסר</th>

									</tr>
								</thead>
								<tbody>
									{% for email in  emails %}
									<tr>
										<td><a href="{% url 'manager:email-update' pk=email.pk %}" class="" role="link" aria-pressed="true">{{ email.header }}</a></td>
										<td>{{ email.index }}</td>
										<td>{{ email.delay_H }}</td>
										<td>{{ email.sent }}</td>
										<td>{{ email.opened }}</td>
										<td>{{ email.clicked }}</td>
										<td>{{ email.status }}</td>

										<td>

											<a class="btn btn-sm btn-outline-info" href="{% url 'manager:campaign-update' pk=email %}"> <i class="far fa-edit"></i></a>
										</td>
										<td>
											<a class="btn btn-sm btn-outline-danger" href="{% url 'manager:campaign-delete' pk=email %}"><i class="fas fa-trash"></i></a>
										</td>
									</tr>
									{% endfor %}
								</tbody>
{#                                {% render_table emails %}#}
							</table>
						</div>
					</div>
				</div>
    <hr>




    <!-- Subscribers table -->
        <div class="row">
				<div class="col-md">
					<div class="">
						<div class="row">
                            <div class="col-md-2" style="position: relative">
                                 <h4>רשומים:</h4>
                            </div>
							<div class="col-md table-action-btn" style="position: relative">
								<a href="#" class="btn btn-sm btn-primary btn-success" role="button" aria-pressed="true">הפק דו"ח</a>
								<a href="{% url 'manager:campaign-create'  %}" class="btn btn-sm btn-primary btn-info" role="button" aria-pressed="true">הוסף מייל</a>
{#								<a href="{% url 'mai' pk=event.pk %}" class="btn btn-sm btn-info" role="button" aria-pressed="true" title="הוספת אורח לרשימה">הוספה <i class="fas fa-plus"></i></a>#}
                            </div>


                        </div>
                    </div>
                <br>
                 <!-- search -->
			<div class="row">
				<div class="col">
					<div class=" form-group search-input">
						<form class="form-inline" method="get">
							{{ subscribers_filter.form }}
							<button class="btn btn-outline-info" type="submit">חיפוש</button>
						</form>
					</div>
				</div>
			</div>


						<br>
						<div class="wrapper-table card card-body">
							<table class="table table-hover">
								<thead>
									<tr>
										<th>שם</th>
										<th>נשלחו</th>
										<th>נפתחו</th>
										<th>קליקים</th>
										<th>ביטול הרשמה</th>
										<th>ערוך</th>
										<th>הסר</th>

									</tr>
								</thead>
								<tbody>
									{% for sub in  subscribers %}
									<tr>
										<td><a href="" class="" role="link" aria-pressed="true">{{ sub.name }}</a></td>
										<td>{{ sub.sent }}</td>
										<td>{{ sub.opened }}</td>
										<td>{{ sub.clicked }}</td>
										<td>{{ sub.unsubscribe }}</td>

										<td>

											<a class="btn btn-sm btn-outline-info" href="{% url 'manager:campaign-update' pk=campaign.pk %}"> <i class="far fa-edit"></i></a>
										</td>
										<td>
											<a class="btn btn-sm btn-outline-danger" href="{% url 'manager:campaign-delete' pk=campaign.pk %}"><i class="fas fa-trash"></i></a>
										</td>
									</tr>
									{% endfor %}
								</tbody>
{#                                {% render_table emails %}#}
							</table>
						</div>
					</div>
				</div>



{% endblock content %}